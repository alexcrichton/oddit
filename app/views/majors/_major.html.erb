<fieldset data-id="<%= major.id %>">

  <legend>
    <%= major.name %> (<%= major.year %>)
    <%= link_to '[edit]', [:edit, major] %> |
    <%= link_to '[remove]', users_remove_major_path(:major_id => major),
          :method => :delete, :remote => true %>
  </legend>

  <% major.requirement_groups.each do |group| %>
    <div class='group'>

      <h4><%= group.name %></h4>

      <% group.requirements.each do |req| %>
        <% finished = (@cache[major][req].size == req.required) %>

        <div class='req<%= finished ? ' finished' : '' %>'
             data-scheduled="<%= @cache[major][req].to_json %>">
          <%= link_to '#', :class => 'name' do %>
            <%= req.name %>

            <% if req.required > 1 %>
              (<%= req.required %>)
            <% end %>
          <% end %>

          <ul>
            <% req.courses.each do |course| %>
              <li><%= course.pretty_name %></li>
            <% end %>
          </ul>
        </div>
      <% end %>

    </div>
  <% end %>

</fieldset>
