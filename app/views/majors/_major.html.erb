<fieldset data-id="<%= major.id %>" class='major'>

  <legend>
    <%= major.name %> <%= major.year %>
    <span class='count'>
      (<%= completed_requirements_count major %> /
      <%= requirements_count major %>)
    </span>
  </legend>

  <div class='link'>
    <%= link_to '[edit]', [:edit, major] %> |
    <%= link_to '[remove]', users_remove_major_path(:major_id => major),
          :method => :delete, :remote => true %> |
    <%= link_to '[show/hide]', '#', :class => 'show-hide' %><br/>

    <%= check_box_tag :show_completed %> show completed requirements
  </div>

  <% major.requirement_groups.each do |group| %>
    <div class='group'>

      <h4>
        <%= group.name %>
        (<%= completed_requirements_count group %> /
        <%= requirements_count group %>)
      </h4>

      <% group.requirements.each do |req| %>
        <div class='req'
             data-scheduled="<%= scheduled_data major, req %>">
          <%= link_to '#', :class => 'name',
                :style => requirement_style(major, req) do %>
            <%= req.name %>

            <% if req.required > 1 %>
              (<%= req.required %>)
            <% end %>
          <% end %>

          <ul>
            <% req.courses.each do |course| %>
              <li><span class='course new' data-id="<%= course.id %>">
                <%= course.pretty_name %>
              </span></li>
            <% end %>
          </ul>
        </div>
      <% end %>

    </div>
  <% end %>

</fieldset>
