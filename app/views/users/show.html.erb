<% javascript 'rails', 'home' %>
<% stylesheet 'home' %>

<!-- <div class='links'><%= link_to '[new semester]', [:new, :semester] %></div> -->

<div id='semesters'>
  <%= render @user.semesters %>
</div>

<div id='majors'>
  <div class='legend'>
    <%= image_tag 'icons/puzzle.png' %> = planned,
    <%= image_tag 'icons/accept.png' %> = completed,
    <%= image_tag 'icons/exclamation.png' %> = unmet
  </div>

  <% @user.majors.each do |major| %>
    <%= render 'users/major', :major => major %>
  <% end %>

  <% if can? :add_major, @user %>
    <%= form_tag add_major_path, :remote => true, :id => 'add-major' do %>
      <div>
        <%= hidden_field_tag :major_id %>
        <span><%= text_field_tag :major_name %></span>
        <%= submit_tag 'Add Major', :disable_with => 'Adding...' %>

        <% if can? :create, Major %>
          <div class='new'>
            <%= link_to 'Create a new major', new_major_path %>
          </div>
        <% end %>
      </div>
    <% end %>
  <% end %>
</div>
